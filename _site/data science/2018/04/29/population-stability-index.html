<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.2.0
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Population Stability Index | Matthew’s Blog</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Population Stability Index" />
<meta name="author" content="Matthew" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Quantifying Population Drift" />
<meta property="og:description" content="Quantifying Population Drift" />
<link rel="canonical" href="http://localhost:4000/data%20science/2018/04/29/population-stability-index.html" />
<meta property="og:url" content="http://localhost:4000/data%20science/2018/04/29/population-stability-index.html" />
<meta property="og:site_name" content="Matthew’s Blog" />
<meta property="og:image" content="http://localhost:4000/images/placeholder.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-29T00:00:00-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/images/placeholder.png" />
<meta property="twitter:title" content="Population Stability Index" />
<meta name="twitter:site" content="@mattburkeley" />
<meta name="twitter:creator" content="@Matthew" />
<script type="application/ld+json">
{"description":"Quantifying Population Drift","author":{"@type":"Person","name":"Matthew"},"@type":"BlogPosting","url":"http://localhost:4000/data%20science/2018/04/29/population-stability-index.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/images/generative-art-31.png"},"name":"Matthew"},"image":{"thumbnail":"/images/psi_small.png","url":"http://localhost:4000/images/placeholder.png","@type":"imageObject"},"headline":"Population Stability Index","dateModified":"2018-04-29T00:00:00-07:00","datePublished":"2018-04-29T00:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/data%20science/2018/04/29/population-stability-index.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/skins/light.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i|Lora:400,400i,700,700i">
  <link rel="alternate" type="application/atom+xml" title="Matthew&#39;s Blog" href="/atom.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>


  <body class="layout--post  population-stability-index">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/posts/">Posts</a></li><li><a href="/categories/">Categories</a></li><li><a href="/tags/">Tags</a></li><li><a href="/search/">Search</a></li><li><a href="/about">About</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
      <a href="/" class="site-logo" rel="home" title="Matthew's Blog">
        <img src="/images/generative-art-31.png" class="site-logo-img animated fadeInDown" alt="Matthew's Blog">
      </a>
    
    
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    
  
  
  

  <div class="page-image">
    <img src="/images/placeholder.png" class="entry-feature-image u-photo" alt="Population Stability Index" >
    
  </div>


    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">Population Stability Index
</h1>
        
      </header>

      <div class="page-sidebar">
        <div class="page-author h-card p-author"><div class="author-info">
    <time class="page-date dt-published" datetime="2018-04-29T00:00:00-07:00"><a class="u-url" href="">April 29, 2018</a>
</time>

  </div>
</div>

        
  <h3 class="page-taxonomies-title">Categories</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy"><a class="p-category" href="/categories/#data-science" title="Pages filed under Data Science">Data Science</a></li>
  </ul>


        
  <h3 class="page-taxonomies-title">Tags</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy"><a href="/tags/#python" title="Pages tagged python" rel="tag">python</a></li><li class="page-taxonomy"><a href="/tags/#ml" title="Pages tagged ml" rel="tag">ml</a></li><li class="page-taxonomy"><a href="/tags/#metrics" title="Pages tagged metrics" rel="tag">metrics</a></li>
  </ul>


      </div>

      <div class="page-content">
        <div class="e-content">
          <h1 id="what-is-the-population-stability-index-psi">What is the population stability index (PSI)?</h1>

<p>PSI is a measure of how much a population has shifted over time or between two different samples of a population in a single number. It does this by bucketing the two distributions and comparing the percents of items in each of the buckets, resulting in a single number you can use to understand how different the populations are. The common interpretations of the PSI result are:</p>

<ul>
  <li><strong>PSI &lt; 0.1</strong>: no significant population change</li>
  <li><strong>PSI &lt; 0.2</strong>: moderate population change</li>
  <li><strong>PSI &gt;= 0.2</strong>: significant population change</li>
</ul>

<h1 id="how-is-psi-used">How is PSI used?</h1>

<p>There are two different ways PSI can be used to make good decisions in a machine learning model building context:</p>

<h2 id="reactive-re-training-triggers">Reactive Re-training Triggers</h2>

<p>After a deploying a ML model into production, it will continue to provide estimates on the population it was trained on. As the population shifts over time, the estimates become less accurate and relevant to the current population, and monitoring the PSI score from the time of model training to current time can be used as automatic triggers to re-train the model when PSI passes a certain threshold (0.2 for example).</p>

<h2 id="proactive-feature-selection">Proactive Feature Selection</h2>

<p>When choosing features to go into a model, certain features may have a lot of predictive power at the time of training, but if a feature is prone to rapid changes in distribution, it may not be a wise decision to include it in the model or it may prompt more frequent monitoring once deployed. PSI is an easy way to check the volatility of population changes for features by comparing populations for several previous time periods.</p>

<h1 id="example-walkthrough">Example Walkthrough</h1>

<p>Here’s a quick example of walking through the steps of a PSI calculation for two (mostly) normal distributions.</p>

<p><img src="/images/psi_large.png" alt="" /></p>

<p>As you can see above, the slightly left-skewed initial population (blue) has flattened out a bit to have more of a flat top of the bell curve in the new population (green). From a visual inspection, it looks as if the population is shifting, but I would like a quantitative way to measure how much the shift is rather than qualitatively guessing how much I should be concerned. PSI is a great way to come up with a single metric to measure this.</p>

<p>To calculate the PSI we first divide the initial population range into 10 buckets (an arbitrary number I chose), and count the number of values in each of those buckets for the initial and new populations, and then divide those by the total values in each population to get the percents in each bucket. As expected, plotting the percents ends up looking like a discretized version of the original chart:</p>

<p><img src="/images/psi_hist.png" alt="" /></p>

<p>From here, we perform the actual PSI calculation for each bucket, and them sum them all up to get the overall PSI values for the distributions.</p>

<h2 id="psi-formula">PSI Formula:</h2>

<script type="math/tex; mode=display">PSI = \sum{}\Big(\big(Actual \% - Expected \%\big) \times ln\big(\dfrac{Actual \%}{Expected \%}\big)\Big)</script>

<table>
  <thead>
    <tr>
      <th>Breakpoint Value</th>
      <th>Bucket</th>
      <th>Initial Count</th>
      <th>New Count</th>
      <th>Initial Percent</th>
      <th>New Percent</th>
      <th>PSI</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-2.330642</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0.01</td>
      <td>0.001000</td>
      <td>0.020723</td>
    </tr>
    <tr>
      <td>-1.801596</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>0.01</td>
      <td>0.025000</td>
      <td>0.013744</td>
    </tr>
    <tr>
      <td>-1.272550</td>
      <td>3</td>
      <td>4</td>
      <td>6</td>
      <td>0.04</td>
      <td>0.050000</td>
      <td>0.002231</td>
    </tr>
    <tr>
      <td>-0.743504</td>
      <td>4</td>
      <td>8</td>
      <td>15</td>
      <td>0.08</td>
      <td>0.125000</td>
      <td>0.020083</td>
    </tr>
    <tr>
      <td>-0.214458</td>
      <td>5</td>
      <td>27</td>
      <td>18</td>
      <td>0.27</td>
      <td>0.150000</td>
      <td>0.070534</td>
    </tr>
    <tr>
      <td>0.314588</td>
      <td>6</td>
      <td>22</td>
      <td>23</td>
      <td>0.22</td>
      <td>0.191667</td>
      <td>0.003906</td>
    </tr>
    <tr>
      <td>0.843633</td>
      <td>7</td>
      <td>16</td>
      <td>26</td>
      <td>0.16</td>
      <td>0.216667</td>
      <td>0.017181</td>
    </tr>
    <tr>
      <td>1.372679</td>
      <td>8</td>
      <td>12</td>
      <td>14</td>
      <td>0.12</td>
      <td>0.116667</td>
      <td>0.000094</td>
    </tr>
    <tr>
      <td>1.901725</td>
      <td>9</td>
      <td>6</td>
      <td>9</td>
      <td>0.06</td>
      <td>0.075000</td>
      <td>0.003347</td>
    </tr>
    <tr>
      <td>2.430771</td>
      <td>10</td>
      <td>3</td>
      <td>3</td>
      <td>0.03</td>
      <td>0.025000</td>
      <td>0.000912</td>
    </tr>
  </tbody>
</table>

<h2 id="interpretation">Interpretation:</h2>

<p>We get a final PSI value of <strong>0.153</strong>, which indicates that there’s a chance our population is shifting, and we may want to monitor it going forwards. Of course, this is just one way of calculating PSI by using equal size binning of 10 buckets. If we keep the 10 buckets but change our binning strategy to quantile bins, we end up with a different percent distribution and an overall lower estimate of <strong>0.129</strong>.</p>

<p><img src="/images/psi_hist_bins.png" alt="" /></p>

<h1 id="final-thoughts">Final Thoughts</h1>

<p>PSI seems to be a metric primarily used in the financial industry, but I think it can have a lot of useful applications in the wider ML community when used widely and consistently.</p>

<h2 id="references">References</h2>

<ul>
  <li>https://www.lexjansen.com/wuss/2017/47_Final_Paper_PDF.pdf</li>
  <li>https://www.listendata.com/2015/05/population-stability-index.html</li>
  <li>https://www.quora.com/What-is-population-stability-index</li>
</ul>

<h2 id="python-implementation">Python Implementation</h2>

<p>Check out my python implementation of PSI and a corresponding python notebook going through the example above at <a href="https://github.com/mwburke/population-stability-index">this repo</a>.</p>

<p>Some assumptions the code makes:</p>

<ul>
  <li>Numpy is the only non-standard library dependency</li>
  <li>Assumes continuous variables (categorical variables are handled differently in PSI)</li>
  <li>Replaces bins in the new population that have 0 count with 0.001 percent to avoid divide by zero errors without affecting overall calculation too much</li>
</ul>

        </div>

        
          <div class="page-share">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fdata%2520science%2F2018%2F04%2F29%2Fpopulation-stability-index.html" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--facebook btn--small"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i> <span>Share</span></a>
  <a href="https://twitter.com/intent/tweet?text=Population+Stability+Index%20http%3A%2F%2Flocalhost%3A4000%2Fdata%2520science%2F2018%2F04%2F29%2Fpopulation-stability-index.html" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--twitter btn--small"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i> <span>Tweet</span></a>
  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fdata%2520science%2F2018%2F04%2F29%2Fpopulation-stability-index.html" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--linkedin btn--small"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> <span>LinkedIn</span></a>
  <a href="https://reddit.com/submit?title=Population+Stability+Index&url=http%3A%2F%2Flocalhost%3A4000%2Fdata%2520science%2F2018%2F04%2F29%2Fpopulation-stability-index.html" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" class="btn btn--reddit btn--small"><i class="fab fa-fw fa-reddit" aria-hidden="true"></i> <span>Reddit</span></a>
</div>

        

        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/data%20visualization/2017/12/28/slopegraph-vs-barchart.html">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> Slopegraph vs Barchart

      </span>
    </a>
  

  
    <a class="page-next" href="/data%20science/2018/06/24/stargazer-regression-reporting.html">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        Stargazer Python Library
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="social-icons"><a class="social-icon" href="https://twitter.com/mattburkeley"><i class="fab fa-twitter-square fa-2x" title="Twitter"></i></a><a class="social-icon" href="https://instagram.com/mattburkeley"><i class="fab fa-instagram fa-2x" title="Instagram"></i></a><a class="social-icon" href="https://github.com/mwburke"><i class="fab fa-github-square fa-2x" title="GitHub"></i></a><a class="social-icon" href="/atom.xml"><i class="fas fa-rss-square fa-2x" title="Feed"></i></a></div><div class="copyright">
    
      <p>&copy; 2020 Matthew's Blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


<!-- MathJax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  </body>

</html>
